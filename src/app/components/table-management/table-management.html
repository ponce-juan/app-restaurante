<div class="side-menu ">
    <div class="side-menu-header">
         <div class="d-flex">
            <input 
                class="form-control" 
                type="search" 
                name="search" 
                id="search" 
                placeholder="Search..."
                [(ngModel)]="searchText"
                (change)="filterProductList()">
        </div>
    </div>
    
    <div class="side-menu-body">
        @if(products && products.length > 0){
            <div class="table-list ">
                <table class="table table-striped">
                <thead>
                    <tr>
                    <th>Nombre</th>
                    <th>Categoría</th>
                    <th>Subcategoría</th>
                    <th>Precio</th>
                    <th>Stock</th>
                    </tr>
                </thead>
                <tbody>
                    @for(product of products; track $index){
                        <tr 
                            class="align-middle" 
                            (click)="selectProduct(product)"
                            [class.table-success]="product === selectedProduct">
                        <td>{{ product.name }}</td>
                        <td>{{ product.category.name }}</td>
                        <td>{{ product.subCategory.name }}</td>
                        <td>{{ product.price }}</td>
                        <td>{{ product.stock }}</td>
                        </tr>
                    }
                </tbody>
                </table>
            </div>
        }
    </div>
    
    <div class="side-menu-footer justify-content-around">
        <div class="d-flex flex-row gap-2">
            <input 
                #quantity 
                class="form-control" 
                type="number" name="quantity" id="quantity" 
                placeholder="Cantidad" min="0" step="1">
            <button 
                class="btn btn-outline-success m-0" 
                (click)="addItem(quantity.valueAsNumber)"
                >Agregar producto
            </button>
        </div>
        <button type="button" class="btn btn-outline-dark" (click)="printCheck()">Print ticket</button>
        <button type="button" class="btn btn-outline-dark" (click)="onClose()">Volver</button>

    </div>
</div>

    @if(editItemMenu()){
        <div class="edit-item-menu" [class.open]="editItemMenu()">
            <div class="edit-item-header">
                <h5>Editar cantidad del item</h5>
                <button type="button" class="btn btn-close" (click)="closeEditMenu()"></button>
            </div>
            <div class="edit-item-body">
                <input 
                type="number" 
                name="quantity" id="quantity" min="1" 
                placeholder="Cantidad" 
                value="{{ itemToEdit().quantity }}"
                #quantityInput>
            </div>
            <div class="edit-item-footer">
                <button class="btn btn-primary" (click)="saveItemChanges(quantityInput.valueAsNumber)">Guardar</button>
                <button class="btn btn-secondary" (click)="closeEditMenu()">Cancelar</button>
            </div>
        </div>
    }